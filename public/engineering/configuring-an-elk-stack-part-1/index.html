<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
<title>Configuring an ELK Stack Part 1 :: user@cybrealm:~$</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="In this article, I&rsquo;ll be configuring ELK stack in docker. This will be 2 part series where first one will focus on configuring base ELK and second one more advanced stuff.
I&rsquo;m following the official Elastic guide on setting it up in docker using docker-compose.
Let&rsquo;s begin.
File structure First thing, I&rsquo;m going to create initial file structure for docker, where Kibana, Metricbeat and Logstash will be able to use these files.
" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="http://localhost:1313/engineering/configuring-an-elk-stack-part-1/" />
<meta property="og:locale" content="en" />
<meta property="og:title" content="Configuring an ELK Stack Part 1 :: user@cybrealm:~$" />
<meta property="og:description" content="In this article, I&rsquo;ll be configuring ELK stack in docker. This will be 2 part series where first one will focus on configuring base ELK and second one more advanced stuff.
I&rsquo;m following the official Elastic guide on setting it up in docker using docker-compose.
Let&rsquo;s begin.
File structure First thing, I&rsquo;m going to create initial file structure for docker, where Kibana, Metricbeat and Logstash will be able to use these files.
" />
  <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2024-05-12 00:00:00 &#43;0000 UTC" />
    <meta property="article:modified_time" content="2024-05-12 00:00:00 UTC" />
  <meta property="article:author" content="user@cybrealm:~$" />
<meta property="og:url" content="http://localhost:1313/engineering/configuring-an-elk-stack-part-1/" />
<meta property="og:site_name" content="user@cybrealm:~$" />
<meta property="og:image" content="" />
<meta property="og:image:width" content="2048" />
<meta property="og:image:height" content="1024" />
<link rel="shortcut icon" href="" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&family=Roboto+Slab:wght@300;400;500&family=Ubuntu+Mono:ital@0;1&display=swap"
  rel="stylesheet"
/>
<link href="/engineering/configuring-an-elk-stack-part-1/" rel="alternate" type="application/rss+xml" title="user@cybrealm:~$" />
<link rel="stylesheet" href="http://localhost:1313/styles.css" />
</head>

  <body>
    <div class="theme-container">
      <div class="container center">
        <header class="site-header">
<nav class="navbar">
  <div class="navbar__first">
    <ul class="navbar__list borders">
      <li><a href="http://localhost:1313/">Home</a></li>
      <li>
        <button class="theme-toggle transparent"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>
</button>
      </li>
    </ul>
  </div>
  <div class="navbar__separator"></div>
</nav>
</header>
        <main class="site-main"><article class="post">
    <header class="post-header">
        <h1 class="post-title"><a href="http://localhost:1313/engineering/configuring-an-elk-stack-part-1/">Configuring an ELK Stack Part 1</a></h1>
        <div class="post-meta">
            <time pubdate datetime="2024-05-12 00:00:00 UTC">
              Published on
              2024-05-12 00:00:00 UTC
            </time>
            <time pubdate datetime="2024-05-12 00:00:00 UTC"> last modified 2024-05-12 00:00:00 UTC. </time>
        </div>
    </header>
      <div class="post-content">
        <p>In this article, I&rsquo;ll be configuring ELK stack in docker. This will be 2 part series where first one will focus on configuring base ELK and second one more advanced stuff.</p>
<p>I&rsquo;m following the official <a href="https://www.elastic.co/blog/getting-started-with-the-elastic-stack-and-docker-compose">Elastic guide</a> on setting it up in docker using docker-compose.</p>
<p>Let&rsquo;s begin.</p>

<h3 id="file-structure">
  File structure
  <a href="#file-structure" class="hanchor" ariaLabel="Anchor"></a>
</h3>
<p>First thing, I&rsquo;m going to create initial file structure for docker, where Kibana, Metricbeat and Logstash will be able to use these files.</p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">bash</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch .env docker-compose.yml filebeat.yml logstash.conf metricbeat.yml</span></span></code></pre></div></div>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name"></span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><pre tabindex="0"><code>tree -la
.
├── docker-compose.yml
├── .env
├── filebeat.yml
├── logstash.conf
└── metricbeat.yml

1 directory, 5 files</code></pre></div>

<h2 id="configuration-files">
  Configuration files
  <a href="#configuration-files" class="hanchor" ariaLabel="Anchor"></a>
</h2>
<p>Next, I&rsquo;m going to configure files that were just created</p>

<h4 id="env">
  .env
  <a href="#env" class="hanchor" ariaLabel="Anchor"></a>
</h4>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">env</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-env" data-lang="env"><span style="display:flex;"><span><span style="color:#75715e"># Project name (if not set, select cwd)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#COMPOSE_PROJECT_NAME=elk-stack</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Password for the &#39;elastic&#39; user(min 6 characters)</span>
</span></span><span style="display:flex;"><span>ELASTIC_PASSWORD<span style="color:#f92672">=</span>elpass
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Password for the &#39;kibana_system&#39; user(min 6 characters)</span>
</span></span><span style="display:flex;"><span>KIBANA_PASSWORD<span style="color:#f92672">=</span>kipass
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Version of Elastic products</span>
</span></span><span style="display:flex;"><span>STACK_VERSION<span style="color:#f92672">=</span>8.7.1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Cluster name</span>
</span></span><span style="display:flex;"><span>CLUSTER_NAME<span style="color:#f92672">=</span>docker-cluster
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># set license to &#39;basic&#39; or &#39;trial&#39; for 30-day trial</span>
</span></span><span style="display:flex;"><span>LICENSE<span style="color:#f92672">=</span>basic
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Port to expose Elasticsearch HTTP API to the host</span>
</span></span><span style="display:flex;"><span>ES_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">9200</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Port to expose Kibana to the host</span>
</span></span><span style="display:flex;"><span>KIBANA_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">5601</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Available host memory for each service in bytes (1GB)</span>
</span></span><span style="display:flex;"><span>ES_MEM_LIMIT<span style="color:#f92672">=</span><span style="color:#ae81ff">1073741824</span>
</span></span><span style="display:flex;"><span>KB_MEM_LIMIT<span style="color:#f92672">=</span><span style="color:#ae81ff">1073741824</span>
</span></span><span style="display:flex;"><span>LS_MEM_LIMIT<span style="color:#f92672">=</span><span style="color:#ae81ff">1073741824</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Sample predefined key only for testing environments</span>
</span></span><span style="display:flex;"><span>ENCRYPTION_KEY<span style="color:#f92672">=</span>c34d38b3a14956121ff2170e5030b471551370178f43e5626eec58b04a30fae2</span></span></code></pre></div></div>
<p>Here, I configure all the necessary variables for elastic to work properly, like passwords, ports, memory limits and so on.</p>
<p>All of the variables that can be configured can be found at <a href="https://www.elastic.co/guide/en/fleet/current/agent-environment-variables.html">Elastic docs</a></p>

<h3 id="base-setup">
  Base Setup
  <a href="#base-setup" class="hanchor" ariaLabel="Anchor"></a>
</h3>

<h4 id="docker-composeyml-setup-container">
  docker-compose.yml (&lsquo;setup&rsquo; container)
  <a href="#docker-composeyml-setup-container" class="hanchor" ariaLabel="Anchor"></a>
</h4>
<p><em>Note: From this point on, make sure syntax is correct in these configuration files. especially spelling and indentation. Otherwise docker will not setup the containers.</em></p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">yml</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">version</span>: <span style="color:#e6db74">&#34;3.8&#34;</span> <span style="color:#ae81ff">// This is deprecated. you can just remove this line</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">certs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">esdata01</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">kibanadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">metricbeatdata01</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">filebeatdata01</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">logstashdata01</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">driver</span>: <span style="color:#ae81ff">local</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">default</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">name</span>: <span style="color:#ae81ff">elastic-network</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">external</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">setup</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">image</span>: <span style="color:#ae81ff">docker.elastic.co/elasticsearch/elasticsearch:${STACK_VERSION}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">certs:/usr/share/elasticsearch/config/certs</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">user</span>: <span style="color:#e6db74">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">command</span>: &gt;<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     bash -c &#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       if [ x${ELASTIC_PASSWORD} == x ]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         echo &#34;Set the ELASTIC_PASSWORD environment variable in the .env file&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         exit 1;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       elif [ x${KIBANA_PASSWORD} == x ]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         echo &#34;Set the KIBANA_PASSWORD environment variable in the .env file&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         exit 1;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       fi;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       if [ ! -f config/certs/ca.zip ]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         echo &#34;Creating CA&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         bin/elasticsearch-certutil ca --silent --pem -out config/certs/ca.zip;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         unzip config/certs/ca.zip -d config/certs;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       fi;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       if [ ! -f config/certs/certs.zip ]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         echo &#34;Creating certs&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         echo -ne \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;instances:\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;  - name: es01\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;    dns:\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;      - es01\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;      - localhost\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;    ip:\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;      - 127.0.0.1\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;  - name: kibana\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;    dns:\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;      - kibana\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;      - localhost\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;    ip:\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &#34;      - 127.0.0.1\n&#34;\
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         &gt; config/certs/instances.yml;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         bin/elasticsearch-certutil cert --silent --pem -out config/certs/certs.zip --in config/certs/instances.yml --ca-cert config/certs/ca/ca.crt --ca-key config/certs/ca/ca.key;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         unzip config/certs/certs.zip -d config/certs;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       fi;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       echo &#34;Setting file permissions&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       chown -R root:root config/certs;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       find . -type d -exec chmod 750 \{\} \;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       find . -type f -exec chmod 640 \{\} \;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       echo &#34;Waiting for Elasticsearch availability&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       until curl -s --cacert config/certs/ca/ca.crt https://es01:9200 | grep -q &#34;missing authentication credentials&#34;; do sleep 30; done;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       echo &#34;Setting kibana_system password&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       until curl -s -X POST --cacert config/certs/ca/ca.crt -u &#34;elastic:${ELASTIC_PASSWORD}&#34; -H &#34;Content-Type: application/json&#34; https://es01:9200/_security/user/kibana_system/_password -d &#34;{\&#34;password\&#34;:\&#34;${KIBANA_PASSWORD}\&#34;}&#34; | grep -q &#34;^{}&#34;; do sleep 10; done;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       echo &#34;All done!&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     &#39;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">healthcheck</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">test</span>: [<span style="color:#e6db74">&#34;CMD-SHELL&#34;</span>, <span style="color:#e6db74">&#34;[ -f config/certs/es01/es01.crt ]&#34;</span>]
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">1s</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">timeout</span>: <span style="color:#ae81ff">5s</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">retries</span>: <span style="color:#ae81ff">120</span></span></span></code></pre></div></div>
<p>This is a base setup for docker compose where storage volume path, network and services are enabled and specified.</p>

<h3 id="elasticsearch">
  Elasticsearch
  <a href="#elasticsearch" class="hanchor" ariaLabel="Anchor"></a>
</h3>
<p>Here, I setup elasticsearch</p>

<h4 id="docker-composeyml">
  docker-compose.yml
  <a href="#docker-composeyml" class="hanchor" ariaLabel="Anchor"></a>
</h4>
<p>Add the following to <code>docker-compose.yml</code></p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">yml</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span> <span style="color:#f92672">es01</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">setup</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">condition</span>: <span style="color:#ae81ff">service_healthy</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">image</span>: <span style="color:#ae81ff">docker.elastic.co/elasticsearch/elasticsearch:${STACK_VERSION}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">co.elastic.logs/module</span>: <span style="color:#ae81ff">elasticsearch</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">certs:/usr/share/elasticsearch/config/certs</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">esdata01:/usr/share/elasticsearch/data</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">${ES_PORT}:9200</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">node.name=es01</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">cluster.name=${CLUSTER_NAME}</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">discovery.type=single-node</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_PASSWORD=${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">bootstrap.memory_lock=true</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.enabled=true</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.http.ssl.enabled=true</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.http.ssl.key=certs/es01/es01.key</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.http.ssl.certificate=certs/es01/es01.crt</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.http.ssl.certificate_authorities=certs/ca/ca.crt</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.transport.ssl.enabled=true</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.transport.ssl.key=certs/es01/es01.key</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.transport.ssl.certificate=certs/es01/es01.crt</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.transport.ssl.certificate_authorities=certs/ca/ca.crt</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.security.transport.ssl.verification_mode=certificate</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.license.self_generated.type=${LICENSE}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">mem_limit</span>: <span style="color:#ae81ff">${ES_MEM_LIMIT}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">ulimits</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">memlock</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">soft</span>: -<span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">hard</span>: -<span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">healthcheck</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">test</span>:
</span></span><span style="display:flex;"><span>       [
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;CMD-SHELL&#34;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;curl -s --cacert config/certs/ca/ca.crt https://localhost:9200 | grep -q &#39;missing authentication credentials&#39;&#34;</span>,
</span></span><span style="display:flex;"><span>       ]
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">timeout</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">retries</span>: <span style="color:#ae81ff">120</span></span></span></code></pre></div></div>
<p>This is docker cluster configuration, where CA certificate and node path is specified. In this case Elasticsearch data and certifications are not stored in docker container. Instead they will be saved in local storage for data persistence and robustness.</p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name"></span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><pre tabindex="0"><code>  volumes:
     - certs:/usr/share/elasticsearch/config/certs
     - esdata01:/usr/share/elasticsearch/data</code></pre></div>
<p>With both these configurations set up, now I can perform <code>docker compose up</code> command to create and run containers.</p>
<p><em>Note: <code>docker compose up</code> command should be run in the folder where <code>docker-compose.yml</code> resides.</em></p>
<p>Here&rsquo;s my example:</p>

  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241205120451.png" alt="SubRegisters"  />
  </figure>

<p>Here you can see that <code>elastic-network</code> and container has successfully run.</p>
<p>In case you need docker composer commands, here are a few useful ones:</p>
<table>
  <thead>
      <tr>
          <th>Command</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>docker compose up</td>
          <td>Created and starts all containers within docker-compose.yml</td>
      </tr>
      <tr>
          <td>docker compose down</td>
          <td>Stops all containers and removes any networks relating to docker-compose.yml. Leaves Volumes intact and allows generated data to persist between builds</td>
      </tr>
      <tr>
          <td>docker compose down -v</td>
          <td>Same as above and removes Volumes. basically starting over.</td>
      </tr>
      <tr>
          <td>docker compose start</td>
          <td>starts existing containers</td>
      </tr>
      <tr>
          <td>docker compose stop</td>
          <td>Stops all containers. same as CTRL+C</td>
      </tr>
  </tbody>
</table>

<h4 id="copying-valid-certificates">
  Copying valid certificates
  <a href="#copying-valid-certificates" class="hanchor" ariaLabel="Anchor"></a>
</h4>
<p>Now that the system is up and running I need to make sure that valid certificates for docker container is present in my local machine.</p>
<p>Here I copy certificate from docker machine to <code>/tmp/</code> folder.</p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">bash</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker cp elk-stack-es01-1:/usr/share/elasticsearch/config/certs/ca/ca.crt /tmp/.</span></span></code></pre></div></div>
<p>now let&rsquo;s test it.</p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">bash</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl --cacert /tmp/ca.crt -u elastic:elpass https://localhost:9200</span></span></code></pre></div></div>
<p>Successful response:</p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">json</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;es01&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cluster_name&#34;</span> : <span style="color:#e6db74">&#34;docker-cluster&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;cluster_uuid&#34;</span> : <span style="color:#e6db74">&#34;ItB3TTyJTMqX5K6McWGaCw&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;version&#34;</span> : {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;number&#34;</span> : <span style="color:#e6db74">&#34;8.7.1&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;build_flavor&#34;</span> : <span style="color:#e6db74">&#34;default&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;build_type&#34;</span> : <span style="color:#e6db74">&#34;docker&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;build_hash&#34;</span> : <span style="color:#e6db74">&#34;f229ed3f893a515d590d0f39b05f68913e2d9b53&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;build_date&#34;</span> : <span style="color:#e6db74">&#34;2023-04-27T04:33:42.127815583Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;build_snapshot&#34;</span> : <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;lucene_version&#34;</span> : <span style="color:#e6db74">&#34;9.5.0&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;minimum_wire_compatibility_version&#34;</span> : <span style="color:#e6db74">&#34;7.17.0&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;minimum_index_compatibility_version&#34;</span> : <span style="color:#e6db74">&#34;7.0.0&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;tagline&#34;</span> : <span style="color:#e6db74">&#34;You Know, for Search&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></div>
<p>Notice that we can access elasticsearch using <code>localhost:9200</code>.</p>

<h3 id="kibana">
  Kibana
  <a href="#kibana" class="hanchor" ariaLabel="Anchor"></a>
</h3>

<h4 id="docker-composeyml-1">
  docker-compose.yml
  <a href="#docker-composeyml-1" class="hanchor" ariaLabel="Anchor"></a>
</h4>
<p>Now I can add Kibana container config in <code>docker-compose.yml</code> and specify that it should run after Elasticsearch node.</p>
<p>Add the following to <code>docker-compose.yml</code></p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">yml</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span> <span style="color:#f92672">kibana</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">es01</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">condition</span>: <span style="color:#ae81ff">service_healthy</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">image</span>: <span style="color:#ae81ff">docker.elastic.co/kibana/kibana:${STACK_VERSION}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">co.elastic.logs/module</span>: <span style="color:#ae81ff">kibana</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">certs:/usr/share/kibana/config/certs</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">kibanadata:/usr/share/kibana/data</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">${KIBANA_PORT}:5601</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">SERVERNAME=kibana</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTICSEARCH_HOSTS=https://es01:9200</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTICSEARCH_USERNAME=kibana_system</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTICSEARCH_PASSWORD=${KIBANA_PASSWORD}</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTICSEARCH_SSL_CERTIFICATEAUTHORITIES=config/certs/ca/ca.crt</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">XPACK_SECURITY_ENCRYPTIONKEY=${ENCRYPTION_KEY}</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">XPACK_ENCRYPTEDSAVEDOBJECTS_ENCRYPTIONKEY=${ENCRYPTION_KEY}</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">XPACK_REPORTING_ENCRYPTIONKEY=${ENCRYPTION_KEY}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">mem_limit</span>: <span style="color:#ae81ff">${KB_MEM_LIMIT}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">healthcheck</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">test</span>:
</span></span><span style="display:flex;"><span>       [
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;CMD-SHELL&#34;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;curl -s -I http://localhost:5601 | grep -q &#39;HTTP/1.1 302 Found&#39;&#34;</span>,
</span></span><span style="display:flex;"><span>       ]
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">timeout</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">retries</span>: <span style="color:#ae81ff">120</span></span></span></code></pre></div></div>
<p>Now you can either use Docker Desktop to enable Kibana container or just use terminal CTLR+C your container and rerun <code>docker compose up</code></p>
<p>Now, open up browser and go to <code>localhost:5601</code> to see your elastic up and running.</p>

  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241205123325.png"   />
  </figure>

<p>Awesome! Now try logging in with credentials that was specified in <code>.env</code> file. It should log in without any problems.</p>

<h3 id="metricbeat">
  Metricbeat
  <a href="#metricbeat" class="hanchor" ariaLabel="Anchor"></a>
</h3>

<h4 id="docker-composeyml-2">
  docker-compose.yml
  <a href="#docker-composeyml-2" class="hanchor" ariaLabel="Anchor"></a>
</h4>
<p>Now that Kibana and Elasticsearch are running and communicating, I can continue and setup Metricbeat same as Kibana before.</p>
<ol>
<li>Add the following to <code>docker-compose.yml</code></li>
</ol>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">yml</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span> <span style="color:#f92672">metricbeat01</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">es01</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">condition</span>: <span style="color:#ae81ff">service_healthy</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">kibana</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">condition</span>: <span style="color:#ae81ff">service_healthy</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">image</span>: <span style="color:#ae81ff">docker.elastic.co/beats/metricbeat:${STACK_VERSION}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">user</span>: <span style="color:#ae81ff">root</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">certs:/usr/share/metricbeat/certs</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">metricbeatdata01:/usr/share/metricbeat/data</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;./metricbeat.yml:/usr/share/metricbeat/metricbeat.yml:ro&#34;</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;/var/run/docker.sock:/var/run/docker.sock:ro&#34;</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;/sys/fs/cgroup:/hostfs/sys/fs/cgroup:ro&#34;</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;/proc:/hostfs/proc:ro&#34;</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;/:/hostfs:ro&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_USER=elastic</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_PASSWORD=${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_HOSTS=https://es01:9200</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">KIBANA_HOSTS=http://kibana:5601</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">LOGSTASH_HOSTS=http://logstash01:9600</span></span></span></code></pre></div></div>

<h4 id="metricbeatyml">
  metricbeat.yml
  <a href="#metricbeatyml" class="hanchor" ariaLabel="Anchor"></a>
</h4>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">yml</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">metricbeat.config.modules</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">path</span>: <span style="color:#ae81ff">${path.config}/modules.d/*.yml</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">reload.enabled</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metricbeat.modules</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">module</span>: <span style="color:#ae81ff">elasticsearch</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">xpack.enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">period</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">${ELASTIC_HOSTS}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">username</span>: <span style="color:#ae81ff">${ELASTIC_USER}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">password</span>: <span style="color:#ae81ff">${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ssl.certificate_authorities</span>: <span style="color:#e6db74">&#34;certs/ca/ca.crt&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ssl.certificate</span>: <span style="color:#e6db74">&#34;certs/es01/es01.crt&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ssl.key</span>: <span style="color:#e6db74">&#34;certs/es01/es01.key&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">module</span>: <span style="color:#ae81ff">logstash</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">xpack.enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">period</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">${LOGSTASH_HOSTS}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">module</span>: <span style="color:#ae81ff">kibana</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">metricsets</span>: 
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">stats</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">period</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">${KIBANA_HOSTS}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">username</span>: <span style="color:#ae81ff">${ELASTIC_USER}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">password</span>: <span style="color:#ae81ff">${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">xpack.enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">module</span>: <span style="color:#ae81ff">docker</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">metricsets</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;container&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;cpu&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;diskio&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;healthcheck&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;info&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#- &#34;image&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;memory&#34;</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#e6db74">&#34;network&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hosts</span>: [<span style="color:#e6db74">&#34;unix:///var/run/docker.sock&#34;</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">period</span>: <span style="color:#ae81ff">10s</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">processors</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">add_host_metadata</span>: <span style="color:#ae81ff">~</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">add_docker_metadata</span>: <span style="color:#ae81ff">~</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">output.elasticsearch</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">${ELASTIC_HOSTS}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">username</span>: <span style="color:#ae81ff">${ELASTIC_USER}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">password</span>: <span style="color:#ae81ff">${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ssl</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">certificate</span>: <span style="color:#e6db74">&#34;certs/es01/es01.crt&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">certificate_authorities</span>: <span style="color:#e6db74">&#34;certs/ca/ca.crt&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">key</span>: <span style="color:#e6db74">&#34;certs/es01/es01.key&#34;</span></span></span></code></pre></div></div>
<ol start="3">
<li>Disable <code>metricbeat.yml</code> execution permission and restart composer</li>
</ol>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">bash</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod go-w metricbeat.yml
</span></span><span style="display:flex;"><span>docker compose up</span></span></code></pre></div></div>
<p>Now add out-of-the-box rules.</p>
<p>Go to: Menu &gt; Management &gt; Stack Monitoring</p>

  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241205125023.png"   />
  </figure>

<p>Here, official guide suggests <code>Set up monitoring with Metricbeat</code> but it didn&rsquo;t find anything automatically, so I went with manual configuration.</p>
<p>after configuring this step you should see the following in monitoring tab</p>

  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241205125211.png"   />
  </figure>


<h3 id="filebeat">
  Filebeat
  <a href="#filebeat" class="hanchor" ariaLabel="Anchor"></a>
</h3>
<p>Now that this cluster is stable and monitored with Metricbeat, we can install Filebeat for log ingestion.</p>

<h4 id="docker-composeyml-3">
  docker-compose.yml
  <a href="#docker-composeyml-3" class="hanchor" ariaLabel="Anchor"></a>
</h4>
<p>Append the following to <code>docker-compose.yml</code></p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">yml</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span> <span style="color:#f92672">filebeat01</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">es01</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">condition</span>: <span style="color:#ae81ff">service_healthy</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">image</span>: <span style="color:#ae81ff">docker.elastic.co/beats/filebeat:${STACK_VERSION}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">user</span>: <span style="color:#ae81ff">root</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">certs:/usr/share/filebeat/certs</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">filebeatdata01:/usr/share/filebeat/data</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;./filebeat_ingest_data/:/usr/share/filebeat/ingest_data/&#34;</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;./filebeat.yml:/usr/share/filebeat/filebeat.yml:ro&#34;</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;/var/lib/docker/containers:/var/lib/docker/containers:ro&#34;</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;/var/run/docker.sock:/var/run/docker.sock:ro&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_USER=elastic</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_PASSWORD=${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_HOSTS=https://es01:9200</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">KIBANA_HOSTS=http://kibana:5601</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">LOGSTASH_HOSTS=http://logstash01:9600</span></span></span></code></pre></div></div>

<h4 id="filebeatyml">
  filebeat.yml
  <a href="#filebeatyml" class="hanchor" ariaLabel="Anchor"></a>
</h4>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">yml</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">filebeat.inputs</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">type</span>: <span style="color:#ae81ff">filestream</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">id</span>: <span style="color:#ae81ff">default-filestream</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">paths</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">ingest_data/*.log</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">filebeat.autodiscover</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">providers</span>:
</span></span><span style="display:flex;"><span>   - <span style="color:#f92672">type</span>: <span style="color:#ae81ff">docker</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">hints.enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">processors</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">add_docker_metadata</span>: <span style="color:#ae81ff">~</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">setup.kibana</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">host</span>: <span style="color:#ae81ff">${KIBANA_HOSTS}</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">username</span>: <span style="color:#ae81ff">${ELASTIC_USER}</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">password</span>: <span style="color:#ae81ff">${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">output.elasticsearch</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">hosts</span>: <span style="color:#ae81ff">${ELASTIC_HOSTS}</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">username</span>: <span style="color:#ae81ff">${ELASTIC_USER}</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">password</span>: <span style="color:#ae81ff">${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">ssl.enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">ssl.certificate_authorities</span>: <span style="color:#e6db74">&#34;certs/ca/ca.crt&#34;</span></span></span></code></pre></div></div>
<p>disable <code>filebeat.yml</code> execution permission and restart container</p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">bash</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod go-w filebeat.yml
</span></span><span style="display:flex;"><span>docker compose up</span></span></code></pre></div></div>

  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241205131216.png"   />
  </figure>


<h3 id="logstash">
  Logstash
  <a href="#logstash" class="hanchor" ariaLabel="Anchor"></a>
</h3>
<p>Final container I&rsquo;m going to setup is logstash which will help us to manage and transform logs.</p>

<h4 id="docker-composeyml-logstash01-container">
  docker-compose.yml (&rsquo;logstash01&rsquo; container)
  <a href="#docker-composeyml-logstash01-container" class="hanchor" ariaLabel="Anchor"></a>
</h4>
<p>Add the following to <code>docker-compose.yml</code></p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">yml</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span> <span style="color:#f92672">logstash01</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">es01</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">condition</span>: <span style="color:#ae81ff">service_healthy</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">kibana</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">condition</span>: <span style="color:#ae81ff">service_healthy</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">image</span>: <span style="color:#ae81ff">docker.elastic.co/logstash/logstash:${STACK_VERSION}</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">co.elastic.logs/module</span>: <span style="color:#ae81ff">logstash</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">user</span>: <span style="color:#ae81ff">root</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">certs:/usr/share/logstash/certs</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">logstashdata01:/usr/share/logstash/data</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;./logstash_ingest_data/:/usr/share/logstash/ingest_data/&#34;</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#e6db74">&#34;./logstash.conf:/usr/share/logstash/pipeline/logstash.conf:ro&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">xpack.monitoring.enabled=false</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_USER=elastic</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_PASSWORD=${ELASTIC_PASSWORD}</span>
</span></span><span style="display:flex;"><span>     - <span style="color:#ae81ff">ELASTIC_HOSTS=https://es01:9200</span></span></span></code></pre></div></div>

<h4 id="logstashconf">
  logstash.conf
  <a href="#logstashconf" class="hanchor" ariaLabel="Anchor"></a>
</h4>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name">json</span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">input</span> {
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">file</span> <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">#https:</span><span style="color:#75715e">//www.elastic.co/guide/en/logstash/current/plugins-inputs-file.html
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#960050;background-color:#1e0010">#default</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">TAIL</span> <span style="color:#960050;background-color:#1e0010">which</span> <span style="color:#960050;background-color:#1e0010">assumes</span> <span style="color:#960050;background-color:#1e0010">more</span> <span style="color:#960050;background-color:#1e0010">data</span> <span style="color:#960050;background-color:#1e0010">will</span> <span style="color:#960050;background-color:#1e0010">come</span> <span style="color:#960050;background-color:#1e0010">into</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">file.</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">#change</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">mode</span> <span style="color:#960050;background-color:#1e0010">=&gt;</span> <span style="color:#f92672">&#34;read&#34;</span> <span style="color:#960050;background-color:#1e0010">if</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">file</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">a</span> <span style="color:#960050;background-color:#1e0010">compelte</span> <span style="color:#960050;background-color:#1e0010">file.</span>  <span style="color:#960050;background-color:#1e0010">by</span> <span style="color:#960050;background-color:#1e0010">default</span>, <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">file</span> <span style="color:#960050;background-color:#1e0010">will</span> <span style="color:#960050;background-color:#1e0010">be</span> <span style="color:#960050;background-color:#1e0010">removed</span> <span style="color:#960050;background-color:#1e0010">once</span> <span style="color:#960050;background-color:#1e0010">reading</span> <span style="color:#960050;background-color:#1e0010">is</span> <span style="color:#960050;background-color:#1e0010">complete</span> <span style="color:#960050;background-color:#1e0010">--</span> <span style="color:#960050;background-color:#1e0010">backup</span> <span style="color:#960050;background-color:#1e0010">your</span> <span style="color:#960050;background-color:#1e0010">files</span> <span style="color:#960050;background-color:#1e0010">if</span> <span style="color:#960050;background-color:#1e0010">you</span> <span style="color:#960050;background-color:#1e0010">need</span> <span style="color:#960050;background-color:#1e0010">them.</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">mode</span> <span style="color:#960050;background-color:#1e0010">=&gt;</span> <span style="color:#f92672">&#34;tail&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">path</span> <span style="color:#960050;background-color:#1e0010">=&gt;</span> <span style="color:#e6db74">&#34;/usr/share/logstash/ingest_data/*&#34;</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">filter</span> {
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">output</span> {
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">elasticsearch</span> <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">index</span> <span style="color:#960050;background-color:#1e0010">=&gt;</span> <span style="color:#f92672">&#34;logstash-%{+YYYY.MM.dd}&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">hosts=&gt;</span> <span style="color:#e6db74">&#34;${ELASTIC_HOSTS}&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">user=&gt;</span> <span style="color:#e6db74">&#34;${ELASTIC_USER}&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">password=&gt;</span> <span style="color:#e6db74">&#34;${ELASTIC_PASSWORD}&#34;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#960050;background-color:#1e0010">cacert=&gt;</span> <span style="color:#e6db74">&#34;certs/ca/ca.crt&#34;</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span></span></span></code></pre></div></div>
<p>Restart composer.</p>

<h4 id="note">
  NOTE
  <a href="#note" class="hanchor" ariaLabel="Anchor"></a>
</h4>
<p>Now, to actually see the logstash data index, you need to add sample log files in <code>logstash_ingest_data</code> and <code>filebeat_ingest_data</code> first.</p>
<p>For that, I used <a href="https://mockaroo.com/">Mockaroo</a> to create sample log file.</p>
<p>Download and rename it from <code>.csv</code> to <code>.log</code> files.</p>
<p>My mock data <code>test_log.log</code> looks like the following</p>

<div class="highlight-wrapper">
  <div class="highlight-toolbar">
    <span class="item">
      <span class="label">Lang:</span>
      <span class="name"></span>
    </span>


    <button class="item right outline brighter hide js-btn-copy-code">Copy</button>
  </div><pre tabindex="0"><code>time,id,first_name,last_name,email,mac_address,ip_address,hash
4/17/2024,1,Rania,Cressey,rcressey0@reference.com,F9-E0-79-93-F6-DA,130.148.172.136,51ba1df5efb4de21b434d94d1e72615b57c30721
12/30/2023,2,Gerhard,Mewton,gmewton1@businessinsider.com,CA-36-6B-25-5B-16,187.64.188.232,9afff3f236157637cdf36f3a116b3f5d3ac3deb0
9/1/2024,3,Anabel,Musk,amusk2@opensource.org,FF-AB-36-D7-DA-E3,105.172.167.115,31f37d280ddf812083dbce74c9a0491b62bacfbd
4/29/2024,4,Mike,Stannas,mstannas3@jalbum.net,D0-B4-C0-DD-B0-00,70.70.51.36,4ed691e0ebd4c17dd2125a460bd92f6ca37cd095
8/1/2024,5,Tadd,Nurden,tnurden4@webmd.com,FA-EC-F3-2C-A4-4E,101.82.60.252,dc5e68d384de61e69fe0798deab41f65040cca56
6/12/2024,6,Neall,Vaulkhard,nvaulkhard5@ucsd.edu,36-78-C0-8B-4C-EF,47.129.241.26,456b8cfcc04155848d993790be677a374a910cb8
2/12/2024,7,Lilli,Linnane,llinnane6@blinklist.com,29-7E-61-0D-27-BA,196.177.55.60,d9c33fe2e9c21d31f88801402606d998c35f80dd
8/3/2024,8,Ianthe,Antognetti,iantognetti7@imdb.com,5E-F1-AF-90-E0-81,121.223.169.75,a17aa33138a84ee53283012338c9c1f0d9c324c9
9/9/2024,9,Piper,Victor,pvictor8@usatoday.com,0E-6D-6C-9B-43-1A,160.228.92.124,6e609309d997e6fa708cdcef0b11425c3bf84341</code></pre></div>
<p>Which I dropped in <code>logstash_ingest_data</code>/ and <code>filebeat_ingest_data/</code>.</p>
<p>Now it&rsquo;ll take a few seconds for Elastic to see the changes in <code>Menu &gt; Stack management &gt; Index management &gt; Reload Indices</code></p>

  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241210232627.png"   />
  </figure>

<p>And here should be logstash data logs.</p>
<p>Now, to see the data, I need to create Data View for the &ldquo;logstash- *&rdquo; pattern.</p>
<p>Go to: Menu &gt; Analytics &gt; Discover &gt; Create data view</p>

  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241205132331.png"   />
  </figure>


  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241210232040.png"   />
  </figure>


  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241210232739.png"   />
  </figure>

<p>If you finished all the steps successfuly, you should see the following stack setup in the Stack Monitoring tab</p>

  <figure class="left">
    <img src="/.gitbook/assets/Pasted%20image%2020241219004800.png"   />
  </figure>


<h2 id="conclusion">
  Conclusion
  <a href="#conclusion" class="hanchor" ariaLabel="Anchor"></a>
</h2>
<p>In this article, I demonstrated how it is possible to set-up ELK Stack in its basic form.</p>
<p>The files for this setup is uploaded on <a href="https://github.com/grcheulishvili/ELK-stack-docker">my github page</a> for public availability.</p>
<p>In the next part, I&rsquo;ll look at more advanced configuration of Elastic.</p>
<p>Until then.</p>

      </div>


    <footer class="post-footer">
    </footer>
  </article>
        </main>
        <footer class="site-footer">
<p class="buildinfo">
  <time datetime="2025-11-27 21:40:09 &#43;04">Site built on: 2025-11-27 21:40:09 &#43;04</time>
</p>
<div class="copyright">
  <p></p>
  <nav class="navbar">
    <ul class="navbar__list">
      <li><a href="http://localhost:1313/posts/index.xml">RSS</a></li>
      <li><a href="http://localhost:1313/sitemap.xml">Sitemap</a></li>
    </ul>
  </nav>
</div>
<p class="themeinfo">Powered by <a href="https://gohugo.io">Hugo</a>, using theme <a href="https://manid2.github.io/hugo-xterm/">Hugo Xterm</a>.</p>
</footer>
      </div>
    </div><script type="text/javascript" src="/bundle.js"></script>
</body>
</html>
