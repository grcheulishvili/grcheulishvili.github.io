---
description: WHERE clause allowing retrieval of hidden data
---

# 1e1 - SQL injection vulnerability allowing retrieval of hidden data \[PortSwigger Lab]

This lab contains a SQL injection vulnerability in the product category filter. When the user selects a category, the application carries out a SQL query like the following:

`SELECT * FROM products WHERE category = 'Gifts' AND released = 1`

To solve the lab, perform a SQL injection attack that causes the application to display one or more unreleased products.

### Solution:

<figure><img src="/.gitbook/assets/Pasted image 20240719185908.png" alt=""><figcaption><p>web interface</p></figcaption></figure>

So taking this application into BurpSuite and selecting a category "Pets" gives me the following request

`GET /filter?category=Pets HTTP/2`

So what should I inject here to cause the following SQL query to malfunction?

`SELECT * FROM products WHERE category = 'Pets' AND released = 1`

So basically, modifying the original `GET /filter?category=Pets HTTP/2` to `GET /filter?category=Pets'+OR+1=1--' HTTP/2` causes to perform the following SQL query

`SELECT * FROM products WHERE category = 'Pets' OR 1=1-- AND released = 1`

meaning that everything will be displayed since `1=1` is TRUE and after that everything is ignored.

***

Imagine another scenario where an application lets user submit their credentials `wiener:peter`. SQL query might look like this

`SELECT * FROM users WHERE username = 'wiener' AND password = 'bluecheese'`

if the query returns the details the login was seccessful. otherwise, it rejected.

an attacker might be able to login as any user without the need for a password. this can be done using `--` sequence in `WHERE` clause where password is checked. for example submitting the username `wiener'--` would produce the following SQL query

`SELECT * FROM users WHERE username = 'wiener'--' AND password = ''`

successfully logging in a user.
